{% extends "employee/base.html" %}
{% load static %}

{% block title %}Back Office Management - Sujata Associates{% endblock %}
{% block page_title %}Back Office Management{% endblock %}
{% block mobile_title %}Back Office{% endblock %}

{% block extra_css %}
<style>
  .backoffice-tabs .nav-link {
    background: linear-gradient(135deg, #0f172a, #2563eb);
    color: #ffffff;
    border: none;
    border-radius: 12px;
    font-weight: 600;
    padding: 0.65rem 1.25rem;
    transition: none;
  }

  .backoffice-tabs .nav-link:not(.active) {
    opacity: 0.85;
  }

  .backoffice-tabs .nav-link i {
    font-size: 1rem;
  }

  .backoffice-tabs .nav-link:hover,
  .backoffice-tabs .nav-link:focus,
  .backoffice-tabs .nav-link.active {
    background: linear-gradient(135deg, #0f172a, #2563eb);
    color: #ffffff;
    opacity: 1;
    border: none;
  }

  .accounts-section-card .card-header h6 {
    color: #ffffff !important;
  }

  .accounts-section-card .card-header {
    background: linear-gradient(135deg, #0f172a, #1d4ed8) !important;
  }

  .accounts-header-badge {
    background: rgba(255, 255, 255, 0.18) !important;
    color: #ffffff !important;
    border: 1px solid rgba(255, 255, 255, 0.3) !important;
  }
</style>
{% endblock %}

{% block content %}
<div class="container-fluid px-0 accounts-wrapper">
  <div class="row g-3 mb-3">
    <div class="col-12">
      <div class="card shadow-sm">
        <div class="card-body d-flex flex-column flex-lg-row align-items-lg-center justify-content-between gap-3">
          <div>
            <h5 class="mb-1 text-primary">Back Office Operations Workspace</h5>
            <p class="mb-0 text-muted">Centralised intake for registrations, licences, certifications, and brand protection workflows.</p>
          </div>
          <div class="d-flex flex-wrap gap-2">
            <span class="badge bg-light text-primary fw-semibold">SLA Tracker Enabled</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Highlights removed as per latest UI requirement -->

  <div class="row g-3">
    <div class="col-12">
      <div class="card border-0 shadow-sm">
        <div class="card-body">
          <ul class="nav nav-pills accounts-tabs backoffice-tabs gap-2 mb-4" role="tablist">
            {% for service in backoffice_services %}
            <li class="nav-item" role="presentation">
              <button class="nav-link {% if forloop.first %}active{% endif %}" id="tab-{{ service.id }}" data-bs-toggle="tab" data-bs-target="#pane-{{ service.id }}" type="button" role="tab">
                <i class="bi {{ service.icon }} me-1"></i>{{ service.title }}
              </button>
            </li>
            {% endfor %}
          </ul>

          <div class="tab-content">
            {% for service in backoffice_services %}
            <div class="tab-pane fade {% if forloop.first %}show active{% endif %}" id="pane-{{ service.id }}" role="tabpanel" aria-labelledby="tab-{{ service.id }}">
              <div class="row g-4">
                <div class="col-lg-8">
                  <div class="card border-0 shadow-sm accounts-section-card">
                    <div class="card-header bg-transparent d-flex justify-content-between align-items-center">
                      <h6 class="mb-0">{{ service.title }}</h6>
                      <span class="badge accounts-header-badge">Intake</span>
                    </div>
                    <div class="card-body">
                      <form class="row g-3">
                        {% for field in service.form_fields %}
                        <div class="col-md-{{ field.col|default:6 }}">
                          <label class="form-label">{{ field.label }}</label>
                          {% if field.type == 'textarea' %}
                            <textarea class="form-control" rows="3" placeholder="{{ field.placeholder }}"></textarea>
                          {% elif field.type == 'select' %}
                            <select class="form-select">
                              <option selected disabled>-- Select --</option>
                              {% for opt in field.options %}
                              <option>{{ opt }}</option>
                              {% endfor %}
                            </select>
                          {% else %}
                            <input type="{{ field.type }}" class="form-control" placeholder="{{ field.placeholder }}">
                          {% endif %}
                        </div>
                        {% endfor %}

                        <div class="col-12">
                          <label class="form-label">Upload Supporting Documents</label>
                          <div class="upload-dropzone">
                            <i class="bi bi-cloud-arrow-up fs-3 text-primary"></i>
                            <p class="mb-1 fw-semibold">Drop documents or click to browse</p>
                            <input type="file" class="form-control" multiple>
                          </div>
                        </div>
                        <div class="col-12 d-flex justify-content-end gap-2">
                          <button type="button" class="btn btn-outline-secondary">Save Draft</button>
                          <button type="button" class="btn btn-primary">Mark Ready</button>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>

                <div class="col-lg-4">
                  <div class="card border-0 shadow-sm mb-3 accounts-section-card">
                    <div class="card-header bg-transparent d-flex justify-content-between align-items-center">
                      <h6 class="mb-0">Document Checklist</h6>
                      <span class="badge accounts-header-badge">Reference</span>
                    </div>
                    <div class="card-body small text-muted">
                      <ul class="list-unstyled mb-0">
                        {% for doc in service.documents %}
                        <li class="mb-2"><i class="bi bi-dot text-primary fs-4 align-middle"></i>{{ doc }}</li>
                        {% endfor %}
                      </ul>
                    </div>
                  </div>

                  <div class="card border-0 shadow-sm accounts-section-card">
                    <div class="card-header bg-transparent">
                      <h6 class="mb-0">About the Process</h6>
                    </div>
                    <div class="card-body small text-muted">
                      <p class="mb-0">{{ service.summary }}</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            {% endfor %}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
